<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ping Pong Game</title>
  <style>
    * { box-sizing:border-box; margin:0; padding:0; }
    body, html {
      width:100%; height:100%;
      background:#000; overflow:hidden;
      font-family:Arial,sans-serif; color:#0ff;
    }
    canvas { background:#111; display:block; margin:0 auto; }
    #score {
      position:absolute; top:10px; left:50%;
      transform:translateX(-50%);
      font-size:1.5rem; letter-spacing:4px;
    }
    #score span { margin:0 1rem; }
    #slider {
      position:absolute; bottom:20px; left:50%;
      transform:translateX(-50%);
      width:80%; max-width:400px;
      display:none;
    }
    @media (pointer: coarse) {
      #slider { display:block; }
      canvas { touch-action:none; }
    }
  </style>
</head>
<body>

  <div id="score">
    <span id="playerName"></span>
    <span id="pScore">0</span>â€“
    <span id="aiScore">0</span>
    <span>Computer</span>
  </div>
  <canvas id="c" width="900" height="500"></canvas>
  <input type="range" id="slider" min="0" max="400" value="200" />

  <script>
  (()=>{
    // params
    const params = new URLSearchParams(location.search);
    const playerName = decodeURIComponent(params.get('name')||'You');
    document.getElementById('playerName').textContent = playerName;

    // canvas
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    const W = canvas.width, H = canvas.height;

    // paddles & ball
    const PADDLE_W=12, PADDLE_H=100, BALL_R=10;
    let pY = (H-PADDLE_H)/2,
        aiY = (H-PADDLE_H)/2,
        ball = { x:W/2, y:H/2, vx:5, vy:3 },
        scoreP=0, scoreA=0;

    // slider for mobile
    const slider = document.getElementById('slider');
    slider.max = H-PADDLE_H;
    slider.addEventListener('input', ()=> pY = +slider.value);

    // mouse control for desktop
    canvas.addEventListener('mousemove', e=>{
      if(window.matchMedia('(pointer: coarse)').matches) return;
      const rect=canvas.getBoundingClientRect();
      pY = e.clientY - rect.top - PADDLE_H/2;
    });

    // draw
    function draw(){
      ctx.clearRect(0,0,W,H);
      // center line
      ctx.strokeStyle='#0ff'; ctx.setLineDash([10,10]);
      ctx.beginPath(); ctx.moveTo(W/2,0); ctx.lineTo(W/2,H); ctx.stroke();
      ctx.setLineDash([]);

      // paddles
      ctx.fillStyle='#0f0';
      ctx.fillRect(0,pY,PADDLE_W,PADDLE_H);
      ctx.fillStyle='#f0f';
      ctx.fillRect(W-PADDLE_W,aiY,PADDLE_W,PADDLE_H);

      // ball with glow
      ctx.fillStyle='#ff0';
      ctx.shadowColor='#ff0'; ctx.shadowBlur=10;
      ctx.beginPath(); ctx.arc(ball.x,ball.y,BALL_R,0,2*Math.PI);
      ctx.fill();
      ctx.shadowBlur=0;

      requestAnimationFrame(draw);
    }

    // AI moves towards ball
    function updateAI(){
      const mid = aiY + PADDLE_H/2;
      if(mid < ball.y - 10) aiY += 4;
      else if(mid > ball.y + 10) aiY -= 4;
      aiY = Math.max(0, Math.min(H-PADDLE_H, aiY));
    }

    // game loop
    function loop(){
      // move ball
      ball.x += ball.vx; ball.y += ball.vy;

      // wall bounce
      if(ball.y < BALL_R || ball.y > H-BALL_R) ball.vy *= -1;

      // paddle collision
      // player
      if(ball.x < PADDLE_W+BALL_R){
        const rel = (ball.y - pY) / PADDLE_H - 0.5;
        if(rel > -0.5 && rel < 0.5){
          // reflect with angle
          const angle = rel * Math.PI/3;
          const speed = Math.hypot(ball.vx,ball.vy) * 1.05; 
          ball.vx =  speed * Math.cos(angle);
          ball.vy =  speed * Math.sin(angle);
        } else {
          scoreA++;
          document.getElementById('aiScore').textContent = scoreA;
          reset();
        }
      }
      // AI
      if(ball.x > W-PADDLE_W-BALL_R){
        const rel = (ball.y - aiY) / PADDLE_H - 0.5;
        if(rel > -0.5 && rel < 0.5){
          const angle = Math.PI - rel * Math.PI/3;
          const speed = Math.hypot(ball.vx,ball.vy) * 1.05;
          ball.vx =  speed * Math.cos(angle);
          ball.vy =  speed * Math.sin(angle);
        } else {
          scoreP++;
          document.getElementById('pScore').textContent = scoreP;
          reset();
        }
      }

      updateAI();
      requestAnimationFrame(loop);
    }

    function reset(){
      ball.x = W/2; ball.y = H/2;
      // random initial direction
      const sign = Math.random()<0.5 ? 1:-1;
      const ang  = (Math.random()*2-1)*(Math.PI/4);
      const spd  = 5;
      ball.vx = sign*spd*Math.cos(ang);
      ball.vy =      spd*Math.sin(ang);
    }

    // start
    reset();
    draw();
    loop();
  })();
  </script>
</body>
</html>
